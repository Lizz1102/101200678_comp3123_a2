{"ast":null,"code":"var _jsxFileName = \"C:\\\\LIZZIS\\\\5TH_SEMESTER\\\\FULL STACK DEV\\\\Assignment 02\\\\101200678_comp3123_a2\\\\101200678_comp3123_a2\\\\src\\\\components\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { createMuiTheme, Container, ThemeProvider } from \"@material-ui/core\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Weather from \"./Weather\";\nexport default function App() {\n  const [city, setCity] = useState(\"Eldoret\");\n  const [error, setError] = useState(null);\n  const [currentWeather, setCurrentWeather] = useState({});\n  const [forecast, setForecast] = useState([]);\n  useEffect(() => {\n    getWeather(city).then(weather => {\n      setCurrentWeather(weather);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  }, [city, error]);\n  useEffect(() => {\n    getForecast(city).then(data => {\n      setForecast(data);\n      setError(null);\n    }).catch(err => {\n      setError(err.message);\n    });\n  }, [city, error]);\n\n  const handleCityChange = city => {\n    setCity(city);\n  };\n\n  const theme = createMuiTheme({\n    typography: {\n      fontFamily: [\"Inter\", \"-apple-system\", \"BlinkMacSystemFont\", '\"Helvetica Neue\"', \"Arial\", \"sans-serif\", '\"Apple Color Emoji\"', '\"Segoe UI Emoji\"', '\"Segoe UI Symbol\"'].join(\",\"),\n      fontSize: 14,\n      h5: {\n        fontWeight: 600\n      }\n    }\n  });\n\n  if (currentWeather && Object.keys(currentWeather).length || forecast && Object.keys(forecast).length) {\n    return /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: theme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      maxWidth: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Weather, {\n      city: city,\n      currentWeather: currentWeather,\n      forecast: forecast,\n      onCityChange: handleCityChange,\n      error: error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    })));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      color: error ? \"secondary\" : \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }), error ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 18\n      }\n    }, error) : \"\");\n  }\n}\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  } else {\n    throw new Error(\"Error: Location \" + response.statusText.toLowerCase());\n  }\n}\n\nfunction getWeather(city) {\n  return fetch(`${process.env.REACT_APP_API_URL}/weather/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`).then(res => handleResponse(res)).then(weather => {\n    if (Object.entries(weather).length) {\n      const mappedData = mapDataToWeatherInterface(weather);\n      return mappedData;\n    }\n  });\n}\n\nfunction getForecast(city) {\n  return fetch(`${process.env.REACT_APP_API_URL}/forecast/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`).then(res => handleResponse(res)).then(result => {\n    if (Object.entries(result).length) {\n      const forecast = [];\n\n      for (let i = 0; i < result.list.length; i += 8) {\n        forecast.push(mapDataToWeatherInterface(result.list[i + 4]));\n      }\n\n      return forecast;\n    }\n  });\n}\n\nfunction mapDataToWeatherInterface(data) {\n  const mapped = {\n    city: data.name,\n    country: data.sys.country,\n    date: data.dt * 1000,\n    humidity: data.main.humidity,\n    icon_id: data.weather[0].id,\n    temperature: data.main.temp,\n    description: data.weather[0].description,\n    wind_speed: Math.round(data.wind.speed * 3.6),\n    // convert from m/s to km/h\n    condition: data.cod\n  }; // Add extra properties for the five day forecast: dt_txt, icon, min, max\n\n  if (data.dt_txt) {\n    mapped.dt_txt = data.dt_txt;\n  }\n\n  if (data.weather[0].icon) {\n    mapped.icon = data.weather[0].icon;\n  }\n\n  if (data.main.temp_min && data.main.temp_max) {\n    mapped.max = data.main.temp_max;\n    mapped.min = data.main.temp_min;\n  } // remove undefined fields\n\n\n  Object.keys(mapped).forEach(key => mapped[key] === undefined && delete data[key]);\n  return mapped;\n}","map":{"version":3,"sources":["C:/LIZZIS/5TH_SEMESTER/FULL STACK DEV/Assignment 02/101200678_comp3123_a2/101200678_comp3123_a2/src/components/App.js"],"names":["React","useEffect","useState","createMuiTheme","Container","ThemeProvider","CircularProgress","CssBaseline","Weather","App","city","setCity","error","setError","currentWeather","setCurrentWeather","forecast","setForecast","getWeather","then","weather","catch","err","message","getForecast","data","handleCityChange","theme","typography","fontFamily","join","fontSize","h5","fontWeight","Object","keys","length","handleResponse","response","ok","json","Error","statusText","toLowerCase","fetch","process","env","REACT_APP_API_URL","REACT_APP_API_KEY","res","entries","mappedData","mapDataToWeatherInterface","result","i","list","push","mapped","name","country","sys","date","dt","humidity","main","icon_id","id","temperature","temp","description","wind_speed","Math","round","wind","speed","condition","cod","dt_txt","icon","temp_min","temp_max","max","min","forEach","key","undefined"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { createMuiTheme, Container, ThemeProvider } from \"@material-ui/core\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport Weather from \"./Weather\";\n\nexport default function App() {\n  const [city, setCity] = useState(\"Eldoret\");\n  const [error, setError] = useState(null);\n  const [currentWeather, setCurrentWeather] = useState({});\n  const [forecast, setForecast] = useState([]);\n\n  useEffect(() => {\n    getWeather(city)\n      .then(weather => {\n        setCurrentWeather(weather);\n        setError(null);\n      })\n      .catch(err => {\n        setError(err.message);\n      });\n  }, [city, error]);\n\n  useEffect(() => {\n    getForecast(city)\n      .then(data => {\n        setForecast(data);\n        setError(null);\n      })\n      .catch(err => {\n        setError(err.message);\n      });\n  }, [city, error]);\n\n  const handleCityChange = city => {\n    setCity(city);\n  };\n\n  const theme = createMuiTheme({\n    typography: {\n      fontFamily: [\n        \"Inter\",\n        \"-apple-system\",\n        \"BlinkMacSystemFont\",\n        '\"Helvetica Neue\"',\n        \"Arial\",\n        \"sans-serif\",\n        '\"Apple Color Emoji\"',\n        '\"Segoe UI Emoji\"',\n        '\"Segoe UI Symbol\"'\n      ].join(\",\"),\n      fontSize: 14,\n      h5: {\n        fontWeight: 600\n      }\n    }\n  });\n\n  if (\n    (currentWeather && Object.keys(currentWeather).length) ||\n    (forecast && Object.keys(forecast).length)\n  ) {\n    return (\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        \n        <Container maxWidth=\"sm\">\n          <Weather\n            city={city}\n            currentWeather={currentWeather}\n            forecast={forecast}\n            onCityChange={handleCityChange}\n            error={error}\n          />\n        </Container>\n      </ThemeProvider>\n    );\n  } else {\n    return (\n      <div>\n        <CircularProgress color={error ? \"secondary\" : \"primary\"} />\n        {error ? <p>{error}</p> : \"\"}\n      </div>\n    );\n  }\n}\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  } else {\n    throw new Error(\"Error: Location \" + (response.statusText).toLowerCase());\n  }\n}\n\nfunction getWeather(city) {\n  return fetch(\n    `${process.env.REACT_APP_API_URL}/weather/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`\n  )\n    .then(res => handleResponse(res))\n    .then(weather => {\n      if (Object.entries(weather).length) {\n        const mappedData = mapDataToWeatherInterface(weather);\n        return mappedData;\n      }\n    });\n}\n\nfunction getForecast(city) {\n  return fetch(\n    `${process.env.REACT_APP_API_URL}/forecast/?q=${city}&units=metric&APPID=${process.env.REACT_APP_API_KEY}`\n  )\n    .then(res => handleResponse(res))\n    .then(result => {\n      if (Object.entries(result).length) {\n        const forecast = [];\n        for (let i = 0; i < result.list.length; i += 8) {\n          forecast.push(mapDataToWeatherInterface(result.list[i + 4]));\n        }\n        return forecast;\n      }\n    });\n}\n\nfunction mapDataToWeatherInterface(data) {\n  const mapped = {\n    city: data.name,\n    country: data.sys.country,\n    date: data.dt * 1000,\n    humidity: data.main.humidity,\n    icon_id: data.weather[0].id,\n    temperature: data.main.temp,\n    description: data.weather[0].description,\n    wind_speed: Math.round(data.wind.speed * 3.6), // convert from m/s to km/h\n    condition: data.cod\n  };\n\n  // Add extra properties for the five day forecast: dt_txt, icon, min, max\n  if (data.dt_txt) {\n    mapped.dt_txt = data.dt_txt;\n  }\n\n  if (data.weather[0].icon) {\n    mapped.icon = data.weather[0].icon;\n  }\n\n  if (data.main.temp_min && data.main.temp_max) {\n    mapped.max = data.main.temp_max;\n    mapped.min = data.main.temp_min;\n  }\n\n  // remove undefined fields\n  Object.keys(mapped).forEach(\n    key => mapped[key] === undefined && delete data[key]\n  );\n\n  return mapped;\n}\n"]},"metadata":{},"sourceType":"module"}